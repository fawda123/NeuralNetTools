<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Variable importance using Garson's algorithm — garson • NeuralNetTools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Variable importance using Garson's algorithm — garson" />
<meta property="og:description" content="Relative importance of input variables in neural networks using Garson's algorithm" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NeuralNetTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Overview.html">Overview</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/fawda123/NeuralNetTools/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Variable importance using Garson's algorithm</h1>
    <small class="dont-index">Source: <a href='https://github.com/fawda123/NeuralNetTools/blob/master/R/NeuralNetTools_gar.R'><code>R/NeuralNetTools_gar.R</code></a></small>
    <div class="hidden name"><code>garson.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Relative importance of input variables in neural networks using Garson's algorithm</p>
    </div>

    <pre class="usage"><span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod_in</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>garson</span><span class='op'>(</span>
  <span class='va'>mod_in</span>,
  <span class='va'>x_names</span>,
  <span class='va'>y_names</span>,
  bar_plot <span class='op'>=</span> <span class='cn'>TRUE</span>,
  x_lab <span class='op'>=</span> <span class='cn'>NULL</span>,
  y_lab <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for numeric</span>
<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod_in</span>, <span class='va'>struct</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for nnet</span>
<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod_in</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for mlp</span>
<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod_in</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for nn</span>
<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod_in</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for train</span>
<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod_in</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mod_in</th>
      <td><p>input model object or a list of model weights as returned from <code><a href='neuralweights.html'>neuralweights</a></code> if using the default method</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments passed to other methods</p></td>
    </tr>
    <tr>
      <th>x_names</th>
      <td><p>chr string of input variable names, obtained from the model object</p></td>
    </tr>
    <tr>
      <th>y_names</th>
      <td><p>chr string of response variable names, obtained from the model object</p></td>
    </tr>
    <tr>
      <th>bar_plot</th>
      <td><p>logical indicating if a <code>ggplot</code> object is returned (default <code>T</code>), otherwise numeric values are returned</p></td>
    </tr>
    <tr>
      <th>x_lab</th>
      <td><p>chr string of alternative names to be used for explanatory variables in the figure, default is taken from <code>mod_in</code></p></td>
    </tr>
    <tr>
      <th>y_lab</th>
      <td><p>chr string of alternative name to be used for the y-axis in the figure</p></td>
    </tr>
    <tr>
      <th>struct</th>
      <td><p>numeric vector equal in length to the number of layers in the network.  Each number indicates the number of nodes in each layer starting with the input and ending with the output.  An arbitrary number of hidden layers can be included.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></code> object for plotting if <code>bar_plot = FALSE</code>, otherwise a <code>data.frame</code> of relative importance values for each input variable.  The default aesthetics for <code><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></code> can be further modified, as shown with the examples.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The weights that connect variables in a neural network are partially analogous to parameter coefficients in a standard regression model and can be used to describe relationships between variables. The weights dictate the relative influence of information that is processed in the network such that input variables that are not relevant in their correlation with a response variable are suppressed by the weights. The opposite effect is seen for weights assigned to explanatory variables that have strong positive or negative associations with a response variable. An obvious difference between a neural network and a regression model is that the number of weights is excessive in the former case. This characteristic is advantageous in that it makes neural networks very flexible for modeling non-linear functions with multiple interactions, although interpretation of the effects of specific variables is of course challenging.</p>
<p>A method described in Garson 1991 (also see Goh 1995) identifies the relative importance of explanatory variables for a single response variables in a supervised neural network by deconstructing the model weights. The relative importance (or strength of association) of a specific explanatory variable for the response variable can be determined by identifying all weighted connections between the nodes of interest. That is, all weights connecting the specific input node that pass through the hidden layer to the response variable are identified. This is repeated for all other explanatory variables until a list of all weights that are specific to each input variable is obtained. The connections are tallied for each input node and scaled relative to all other inputs. A single value is obtained for each explanatory variable that describes the relationship with the response variable in the model (see the appendix in Goh 1995 for a more detailed description). The original algorithm indicates relative importance as the absolute magnitude from zero to one such the direction of the response cannot be determined.</p>
<p>Misleading results may be produced if the neural network was created with a skip-layer using <code>skip = TRUE</code> with the <code><a href='https://rdrr.io/pkg/nnet/man/nnet.html'>nnet</a></code> or <code><a href='https://rdrr.io/pkg/caret/man/train.html'>train</a></code> functions.  Garson's algorithm does not describe the effects of skip layer connections on estimates of variable importance.  As such, these values are removed prior to estimating variable importance.</p>
<p>The algorithm currently only works for neural networks with one hidden layer and one response variable.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Beck, M.W. 2018. NeuralNetTools: Visualization and Analysis Tools for Neural Networks. Journal of Statistical Software. 85(11):1-20.</p>
<p>Garson, G.D. 1991. Interpreting neural network connection weights. Artificial Intelligence Expert. 6(4):46-51.</p>
<p>Goh, A.T.C. 1995. Back-propagation neural networks for modeling complex systems. Artificial Intelligence in Engineering. 9(3):143-151.</p>
<p>Olden, J.D., Jackson, D.A. 2002. Illuminating the 'black-box': a randomization approach for understanding variable contributions in artificial neural networks. Ecological Modelling. 154:135-150.</p>
<p>Olden, J.D., Joy, M.K., Death, R.G. 2004. An accurate comparison of methods for quantifying variable importance in artificial neural networks using simulated data. Ecological Modelling. 178:389-397.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='olden.html'>olden</a></code> for a more flexible approach for variable importance</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## using numeric input</span>

<span class='va'>wts_in</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>13.12</span>, <span class='fl'>1.49</span>, <span class='fl'>0.16</span>, <span class='op'>-</span><span class='fl'>0.11</span>, <span class='op'>-</span><span class='fl'>0.19</span>, <span class='op'>-</span><span class='fl'>0.16</span>, <span class='fl'>0.56</span>, <span class='op'>-</span><span class='fl'>0.52</span>, <span class='fl'>0.81</span><span class='op'>)</span>
<span class='va'>struct</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>1</span><span class='op'>)</span> <span class='co'>#two inputs, two hidden, one output </span>

<span class='fu'>garson</span><span class='op'>(</span><span class='va'>wts_in</span>, <span class='va'>struct</span><span class='op'>)</span>
</div><div class='img'><img src='garson-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## using nnet</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.stats.ox.ac.uk/pub/MASS4/'>nnet</a></span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>neuraldat</span><span class='op'>)</span> 
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123</span><span class='op'>)</span>

<span class='va'>mod</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/nnet/man/nnet.html'>nnet</a></span><span class='op'>(</span><span class='va'>Y1</span> <span class='op'>~</span> <span class='va'>X1</span> <span class='op'>+</span> <span class='va'>X2</span> <span class='op'>+</span> <span class='va'>X3</span>, data <span class='op'>=</span> <span class='va'>neuraldat</span>, size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>
</div><div class='output co'>#&gt; # weights:  26
#&gt; initial  value 259.012592 
#&gt; iter  10 value 0.986480
#&gt; iter  20 value 0.225311
#&gt; iter  30 value 0.139585
#&gt; iter  40 value 0.098961
#&gt; iter  50 value 0.038200
#&gt; iter  60 value 0.022839
#&gt; iter  70 value 0.013774
#&gt; iter  80 value 0.008530
#&gt; iter  90 value 0.005172
#&gt; iter 100 value 0.003044
#&gt; final  value 0.003044 
#&gt; stopped after 100 iterations</div><div class='input'> 
<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod</span><span class='op'>)</span>  
</div><div class='img'><img src='garson-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>## using RSNNS, no bias layers</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/cbergmeir/RSNNS'>RSNNS</a></span><span class='op'>)</span>

<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='va'>neuraldat</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'X1'</span>, <span class='st'>'X2'</span>, <span class='st'>'X3'</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='va'>neuraldat</span><span class='op'>[</span>, <span class='st'>'Y1'</span><span class='op'>]</span>
<span class='va'>mod</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/RSNNS/man/mlp.html'>mlp</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>

<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod</span><span class='op'>)</span>

<span class='co'>## using neuralnet</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/bips-hb/neuralnet'>neuralnet</a></span><span class='op'>)</span>

<span class='va'>mod</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/neuralnet/man/neuralnet.html'>neuralnet</a></span><span class='op'>(</span><span class='va'>Y1</span> <span class='op'>~</span> <span class='va'>X1</span> <span class='op'>+</span> <span class='va'>X2</span> <span class='op'>+</span> <span class='va'>X3</span>, data <span class='op'>=</span> <span class='va'>neuraldat</span>, hidden <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>

<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod</span><span class='op'>)</span>

<span class='co'>## using caret</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/topepo/caret/'>caret</a></span><span class='op'>)</span>

<span class='va'>mod</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/RSNNS/man/train.html'>train</a></span><span class='op'>(</span><span class='va'>Y1</span> <span class='op'>~</span> <span class='va'>X1</span> <span class='op'>+</span> <span class='va'>X2</span> <span class='op'>+</span> <span class='va'>X3</span>, method <span class='op'>=</span> <span class='st'>'nnet'</span>, data <span class='op'>=</span> <span class='va'>neuraldat</span>, linout <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod</span><span class='op'>)</span>

<span class='co'>## modify the plot using ggplot2 syntax</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span>

<span class='va'>mod</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/nnet/man/nnet.html'>nnet</a></span><span class='op'>(</span><span class='va'>Y1</span> <span class='op'>~</span> <span class='va'>X1</span> <span class='op'>+</span> <span class='va'>X2</span> <span class='op'>+</span> <span class='va'>X3</span>, data <span class='op'>=</span> <span class='va'>neuraldat</span>, size <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>

<span class='va'>cols</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/grDevices/palettes.html'>heat.colors</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
<span class='fu'>garson</span><span class='op'>(</span><span class='va'>mod</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span><span class='st'>'Rel. Importance'</span>, limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_gradient.html'>scale_fill_gradientn</a></span><span class='op'>(</span>colours <span class='op'>=</span> <span class='va'>cols</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_gradient.html'>scale_colour_gradientn</a></span><span class='op'>(</span>colours <span class='op'>=</span> <span class='va'>cols</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Marcus W. Beck.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


